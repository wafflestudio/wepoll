<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <title>Wepoll</title>
    <%= csrf_meta_tags %>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->

    <!-- Le styles -->
    <%= stylesheet_link_tag    "application", :media => "all" %>

    <!-- Le fav and touch icons -->
    <!--    <link href="images/favicon.ico" rel="shortcut icon">-->
    <!--    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">-->
    <!--    <link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">-->
    <!--    <link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">-->
  </head>
  <body>
    <div id="fb-root"></div>
    <script src="//connect.facebook.net/en_US/all.js"></script>
    <script>
      FB.init({
        appId      : '148897555227851', // App ID
        channelUrl : '//ruby.snu.ac.kr:7789/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    </script>
    <div class="top-bar">
      top-bar
    </div>

    <div id="container" class="container_16 clearfix">

      <div class="grid_16 clearfix">
        <!-- notification bars -->
        <% [:notice, :error, :alert].each do |level| %>
          <% unless flash[level].blank? %>
            <div class="grid_16">
              <div data-alert="alert" class="alert alert-<%= flash_class(level) %> fade in">
                <a class="close" data-dismiss="alert" href="#">&times;</a>
                <%= content_tag :p, flash[level] %>
              </div>
            </div>
          <% end %>
        <% end %> <!-- end of alert levels -->
        <div id="main-content" class="grid_12 alpha">
          <div id="header" class="clearfix">
            <div id="logo-wrapper" class="prefix_1 grid_3">
              <a href="/"><h1 class="grid_3 alpha omega">logo here</h1></a>
            </div>

            <div id="search-bar-wrapper" class="prefix_1 grid_5">
              <%= form_tag "/search", :id => "main-search-bar" do |f| %>
                <%= hidden_field_tag :search_pass, "true" %>
                <%= text_field_tag :query,"", :placeholder => "정치인, 동 이름을 입력하세요", :autocomplete => "off" %>
                <%= submit_tag "검색"%>
              <% end -%>
            </div>

          </div>
          <div class="grid_12 alpha omega">
            <%= yield %>
          </div>
        </div>

        <div id="sidebar" class="grid_4 omega">
          <div class="grid_3" id="login-status">
            <%= render :partial => '/login_info' %>
          </div>

          <%= yield :sidebar %>
        </div>

      </div> <!-- end of content -->

    </div> <!-- /container -->
    <footer>
      <div class="container_16">
        <%= render :partial => '/layouts/footer' %>
      </div>
    </footer>


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <%= javascript_include_tag "application" %>
    <%= yield :scripts %>
    <script type="text/javascript">
      $(document).ready(function() {
          $('#query').keydown(function(e) {
            if (e.keyCode != 38 && e.keyCode != 40) {
            if ($('#query').val() != "") { $.post('/search', { query: $('#query').val() }, function(html) {
              $('.search_result').remove();
              $(html).appendTo('.result_field');
              });
            }}});
          })
    </script>
  </body>
</html>
